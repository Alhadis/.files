#!/bin/sh


# Allow different containing folders to be specified
type=Restored
while getopts ohs option; do
	case $option in
		o) type=Old;;
		h) type=High-quality;;
		s) type=Scans;;
		?) echo "Usage: $(basename $0) [-ows] type filename"; exit 2;;
	esac
done
shift $((OPTIND - 1))


folder=$(echo $1 | sed 's/s$//')
folder+="s"
shift

# Safety check
[ -d "$*" ] || [ -f "$*" ] || {
	>&2 echo "Not a directory: $*"
	exit 2;
};

name=$(basename "$*")
dest=~/Documents/MA/Images/$type/$folder/

# Targeting a directory
[ -d "$*" ] && {
	dsclean
	zip -r "$name.zip" "$name"
	rm -rf "$name"
	mv "$name.zip" $dest
	exit 0;
};

# Targeting a file
[ -f "$*" ] && mv "$name" $dest;

dsclean
